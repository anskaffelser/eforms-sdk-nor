noticeTypes: [16, 30]

fields:
  OPT-002-notice:
    pattern:
      value: ^eforms-sdk-\d\.\d#extended#urn:fdc:anskaffelser.no:2023:eforms:national$

rules:
  # /*/cbc:CustomizationID
  OPT-002-notice:
    - id: EFORMS-NOR-R001
      test: matches(normalize-space(),'^eforms-sdk-\d\.\d#extended#urn:fdc:anskaffelser.no:2023:eforms:national$')
      message: Customization identifier must match the Norwegian accepted identifier

  # /*/cbc:NoticeLanguageCode
  BT-702(a)-notice:
    - id: EFORMS-NOR-R002
      test: normalize-space() = ('BUL', 'CES', 'DAN', 'DEU', 'ELL', 'ENG', 'EST', 'FIN', 'FRA', 'GLE', 'HRV', 'HUN', 'ITA', 'LAV', 'LIT', 'MLT', 'NLD', 'POL', 'POR', 'RON', 'SLK', 'SLV', 'SPA', 'SWE', 'NOR', 'NOB', 'NNO')
      message: ...

  # /*/cac:AdditionalNoticeLanguage/cbc:ID
  BT-702(b)-notice:
    - id: EFORMS-NOR-R003
      test: normalize-space() = ('BUL', 'CES', 'DAN', 'DEU', 'ELL', 'ENG', 'EST', 'FIN', 'FRA', 'GLE', 'HRV', 'HUN', 'ITA', 'LAV', 'LIT', 'MLT', 'NLD', 'POL', 'POR', 'RON', 'SLK', 'SLV', 'SPA', 'SWE', 'NOR', 'NOB', 'NNO')
      message: ...

  # /*
  ND-Root:
    - id: EFORMS-NOR-R004
      test: normalize-space(cbc:NoticeLanguageCode) = ('NOR', 'NOB', 'NNO') or (some $l in cac:AdditionalNoticeLanguage/cbc:ID satisfies normalize-space($l) = ('NOR', 'NOB', 'NNO')) # then true() else false())
      message: At least one of the official lingustic versions must be in Norwegian.

    - id: EFORMS-NOR-R007
      test: not(/*/ext:UBLExtensions/ext:UBLExtension/ext:ExtensionContent/efext:EformsExtension/efac:NonOfficialLanguages)
      message: Non-official languages are not used for national notices.
